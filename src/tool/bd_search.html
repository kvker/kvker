<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <title>kvker的个人网站</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta charset="utf-8" />
    <meta name="description" content="kvker个人的聚合搜索网站, 搜罗多多的网站" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="stylesheet" href="/css/custom.css" />

    <style>
      nav {
        display: flex;
        flex-direction: column;
        width: 100px;
      }

      button {
        width: 100%;
        height: 40px;
      }

      .selected {
        color: var(--main_color);
      }

      main {
        flex: 1;
      }

      iframe {
        border: 0;
      }
    </style>
  </head>

  <body class="flex">
    <nav id="nav"></nav>

    <iframe class="f1" id="iframe" src="#"></iframe>

    <script src="/js/kk.js"></script>
    <script>
      let page = new (class Page extends KK {
        constructor() {
          super()
          this.pans = [
            {
              name: '罗马盘',
              link: 'https://www.luomapan.com',
            },
            {
              name: '大圣盘',
              link: 'https://www.dashengpan.com',
            },
            {
              name: '56网盘',
              link: 'https://www.56wangpan.com',
            },
            {
              name: '小白盘',
              link: 'https://www.xiaobaipan.com',
            },
            {
              name: '文件搜',
              link: 'http://wjsou.com/',
            },
            {
              name: '盘搜搜',
              link: 'https://www.pansoso.com/',
            },
            {
              name: '小可搜搜',
              link: 'https://www.xiaokesoso.com/',
            },
            {
              name: '小昭来啦',
              link: 'https://www.xiaozhaolaila.com/',
            },
            {
              name: 'SOSO云盘',
              link: 'https://www.sosoyunpan.com/',
            },
            {
              name: 'SO百度',
              link: 'https://www.sobaidupan.com/',
            },
            {
              name: '凌风云搜索',
              link: 'https://www.lingfengyun.com/',
            },
            {
              name: '去转盘',
              link: 'https://www.quzhuanpan.com/',
            },
            {
              name: '小不点搜索',
              link: 'https://www.xiaoso.net/',
            },
            {
              name: 'pan58搜索',
              link: 'https://www.pan58.com/',
            },
          ]
          this.update({
            nav: {
              html: this.renderNav(this.pans),
            },
            iframe: {
              src: this.pans[0].link,
            },
            button0: {
              class: 'selected',
            },
          })
        }

        renderNav(list) {
          let nav_html = list.reduce((p, c, idx) => {
            p += `
            <button id="button${idx}" onclick="page.switchPan(${idx})">${c.name}</button>
          `
            return p
          }, '')
          return nav_html + '<a href="/"><button onclick="page.switchPan(${idx})">回首页</button></a>'
        }

        switchPan(idx) {
          console.log(idx)
          this.update({
            'button\d?': {
              class: '',
              regexp: true,
            },
          })
          this.update({
            iframe: {
              src: this.pans[idx].link,
            },
            ['button' + idx]: {
              class: 'selected',
            },
          })
        }
      })()
    </script>
  </body>
</html>
