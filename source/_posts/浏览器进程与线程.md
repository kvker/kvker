---
layout: note
title: 浏览器进程与线程
excerpt: Read more...
date: 2022-5-29 14:17:11
updated: 2022-5-29 14:17:11
comments: false
lang: zh-CN
---

进程：

一个运行程序的内存示例，内含一条自带的主线程以及对应的代码与数据。



线程：

一个进程可以提供除了主线程外的多个子线程，从而实现多线程，达到提升运行效率目的。



进程与线程的关系：



线程间共享数据

某个线程挂了，进程就挂了

进程关闭，操作系统则回收内存回收内存

进程间互相隔离（通信则使用IPC，进程间通信机制）

进程间互相隔离（通信则使用Inter-Process Communication，即IPC进行进程间通信）


单进程浏览器：

不稳定

不流畅

不安全

不稳定，由于插件与js脚本出问题，挂掉很正常；

不流畅，你可以想象插入一个死循环；

不安全，C/C++的插件，或者高权限的js漏洞，导致可以直接访问用户文件，或者通过ActionX访问系统API……



多进程浏览器：

稳定

流畅

安全

稳定，由于标签页通过进程区分，某个进程挂了不会导致别的标签页出问题，插件啥的类似；

流畅，同上，死循环也不影响其他标签页；

安全，使用安全沙箱，屏蔽js的任何危险操作。



浏览器进程：

一个浏览器主进程

一个GPU进程（从浏览器主进程独立出来）

一个网络进程（从浏览器主进程独立出来）

多个渲染进程

多个插件进程


面向服务的浏览器进程（SOA，Services Oriented Architecture）：

浏览器主进程

插件进程

渲染进程

基础服务

  Profile进程

  UI进程

  GPU进程

  网络进程
  
  文件进程

  设备进程

  Audio进程

  Video进程

  等等


如果配置比较垃圾，则会整合一些基础服务到一个进程从而节省资源（不做考虑）





拓展：

浏览器的渲染实际上是渲染了一张图片到不同的标签页面中

选中文字本质是通过进程间消息将操作反馈给渲染进程，渲染进程渲染出被选中的图片样式

  